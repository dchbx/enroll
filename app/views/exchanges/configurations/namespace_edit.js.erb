$('#data_container').html("<%= j render partial: 'exchanges/configurations/namespace_edit' %>");

$(function(){
  $('.switch > input:checkbox').click(function(e) {
    const spinner = $(this).parent('.switch').siblings('.spinner-border');
    spinner.removeClass('d-none');
    const feature_key = $(this).siblings("input[name='feature_key']").val();
	  $.ajax({
	    url: ("/exchanges/configurations/"+ feature_key +"/toggle_feature"),
	    type: 'PATCH',
	    data: {is_enabled: $(this).prop("checked")},
	  }).done(function() {
	    spinner.addClass('d-none');
	  });
  });

  $('.new_feature .feature-filter').change(function(){
		const target_feature   = $(this).siblings('#target_feature').val();
		const filter_params = {};
		filter_params[$(this).attr('name')] = $(this).val();
		$(this).siblings('input[name*=filter]').each(function(){
			filter_params[$(this).attr('name')] = $(this).val();
		});
		$.ajax({
		  url: "/exchanges/configurations/" + target_feature + "/edit",
		  type: 'GET',
		  data: filter_params
		})
	  // .done(function() {
	  //   spinner.addClass('d-none');
	  // });
  });
});
