<h2><%= notice_kind.persisted? ? 'Edit' : 'Create' %> Notice Template</h2>

<div class="row">
<%= form_for notice_kind do |f| %>
  <div class="form-group col-xs-8">
    <label for="noticeTitle">Title</label>
    <%= f.text_field :title, class: 'form-control' %>
  </div>

  <div class="form-group col-xs-8">
    <label for="noticeDescription">Description</label>
    <%= f.text_field :description, class: 'form-control' %>
  </div>

  <div class="form-group col-xs-8">
    <label for="noticeDescription">Receipient</label>
    <%= f.select(:receipient, options_for_select(Notifier::NoticeKind::RECEIPIENTS.inject([]) {|options, (k, v)| options << [k, v]}), { :class => 'form-control'} ) %>
  </div>
 
  <div class="form-group col-xs-12">
    <%= f.fields_for :template do |template_form| %>
    <label for="noticeBody">NoticeBody</label>
      <%= template_form.cktext_area :raw_body, value: notice_kind.template.raw_body, class: 'notice_template' %>
    <% end %>
  </div>

  <%= hidden_field_tag 'notice_preview_url', preview_notice_kind_path(id: notice_kind.id) %>
  <div class="col-xs-12">
    <button type="submit" class="btn btn-primary">Submit</button>
   </div>
<% end %>
</div>
<span>
<%= link_to preview_notice_kind_path(id: notice_kind.id), class: "btn btn-primary notice-preview", target: '_blank' do %>
    <span class="glyphicon glyphicon-eye-open"></span> Preview
<% end %>
</span>

<!-- <a href="#" class="btn btn-primary notice-preview"><span class="glyphicon glyphicon-eye-open"></span> Preview</a>
 -->


<!-- <div class='pdf_preview_container'>
</div> -->

<script>

$('#notice_kind_receipient').change(function() {

for (instance in CKEDITOR.instances){CKEDITOR.instances[instance].destroy();}

CKEDITOR.replace('notice_kind_template_raw_body',{
});

});



</script>

